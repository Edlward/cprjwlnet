/*
 * APF_Define.h
 *
 *  Created on: 2015年2月3日
 *      Author: Administrator
 */

#ifndef APF_DEFINE_H_
#define APF_DEFINE_H_

#define APF_SWITCH_FREQ				(256*50)	//APF的开关频率
#define APF_SAMPLE_FREQ				(256*50*2)	//逆变器采样周期
#define DEAD_TIME_VALUE				(2.5e-6)	//逆变器的死区时间
#define GID_FREQUENCE				(50)		//电网频率
#define FFT_LENGTH					256
#define DC_MIN_VOLTAGE				20			//直流母线最低电压
#define DC_REF_DEFAULT				330			//默认直流母线给定电压
#define Q_REF_DEFAULT				1			//无功电流默认给定值
#define DC_LINK_WARNING_VALUE		390			//直流母线电压报警值

#define APF_SWITCH_PERIOD			(1.0 / APF_SWITCH_FREQ)
#define APF_SAMPLE_PERIOD			(1.0 / APF_SAMPLE_FREQ)
#define POINT_NUM					(APF_SAMPLE_FREQ / GID_FREQUENCE + 50)
#define APF_STATE_BIT_STOP			1	//APF启动停止标志位 0:APF启动
#define APF_STATE_BIT_SWSTOP		2	//APF软停止标志位	1:APF停止
#define APF_STATE_BIT_OC1			4	//APF过流标志位		1:APF过流
#define APF_STATE_BIT_OC2			8	//APF过流标志位		1:APF过流
#define APF_STATE_BIT_OV			16	//APF直流母线过压标志位	1:APF过压
#define APF_STATE_BIT_IGBT_ERR		32	//APF变流器IGBT故障	1：IGBT故障
#define APF_STATE_BIT_TEST			64	//测试IGBT

#define DISABLE			0
#define ENABLE			(!DISABLE)
#define SET				1
#define RESET			0

#if (APF_SAMPLE_FREQ == 12800)
#define DF22_3000Hz {0.209856072320286, \
	0.419712144640572,0.209856072320286,\
	-0.354445167979232,0.193869457260376,0,0}

#define DF22_4000Hz {0.287518668565497,\
	0.575037337130993,0.287518668565497,\
	-0.0215805305083055,0.171655204770292,0,0}

#define DF22_2500Hz {0.167760357788046,\
	0.335520715576093,0.167760357788046,\
	-0.555647145764644,0.226688576916829,0,0}

#define DF22_70Hz {0.000288087785755638,\
	0.000576175571511277,0.000288087785755638,\
	-1.95141996721101,0.952572318354034,0,0}
#elif (APF_SAMPLE_FREQ == 25600)
#define DF22_3000Hz {0.0818375271291349,0.163675054258270,0.0818375271291349,-1.04391678472455,0.371266893241088,0,0}
#define DF22_4000Hz {0.124515511798204,0.249031023596407,0.124515511798204,-0.784476532733103,0.282538579925917,0,0}
#define DF22_2500Hz {0.0615994329049922,0.123198865809984,0.0615994329049922,-1.18570236939364,0.432100101013612,0,0}
#define DF22_500Hz	{0.00345237703192375,0.00690475406384750,0.00345237703192375,-1.82704904565831,0.840858553786010,0,0}
#define DF22_70Hz {7.29020923980869e-05,0.000145804184796174,7.29020923980869e-05,-1.97570475523526	, 0.975996363604849,0,0}
#define DF22_15Hz {3.37965023085662e-06,6.75930046171323e-06,3.37965023085662e-06,-1.99479351415301,0.994807032753930,0,0}
#define DF22_5Hz	{3.76168966753658e-07,7.52337933507316e-07,3.76168966753658e-07,-1.99826449950512,0.998266004180991,0,0}
#endif

#define PI_CUR_DEFALUT  {4, 0.5*APF_SAMPLE_PERIOD, 0, 350,-350, 1}
#define PI_VLT_DEFALUT  {0.2, 5*APF_SAMPLE_PERIOD, 0, 15,-15, 1}
#define PI_PLL_DEFALUT	{10, 1* APF_SAMPLE_PERIOD,0,65*2*PI_CONST,45*2*PI_CONST,1}

#endif /* APF_DEFINE_H_ */
